
# 开发要求
## 任务介绍
我在做安卓开发，并研究如何利用AI来复刻公开的高德地图，但我的复刻无需100%相似，我只需要做到如下几点：
- 1、UI结构基本相似，图标做不到一模一样不要紧，类似即可。
- 2、不需要做出APP的所有页面，例如高德APP，我们只做首页、消息、我的这些典型页面就可以了，其他的页面，我们全部设置为空页面，只保留一个入口给后续开发接入，暂时不需要处理。
- 3、不需要实现动态，例如消息列表我们给他固定死（联系人就只有这些），酒店卖商家我也给他固定死（就只有这些店铺）。
- 4、不需要数据库，但是需要保存重要的信号（这些信号我会指定），因为我要把构建的“虚拟APP”拿去给AI操作，例如我要它“订下最贵的酒店”，为了check其任务有没有完成，我至少需要一个json来存储“所有人的酒店的价格列表”。
- 5、不需要登陆，不需要联网，可以理解为我们这APP仅仅自己使用，哪怕UI上显示发送了一条消息给小明，小明也不可能真的收到这个信息。
- 6、开发过程，可以考虑截图给AI，让AI实现开发任务。
- 7、没有任何限制，对框架等的选取完全取决于开发者习惯
- 8、不需要通知权限等复杂的东西，至多需要下保存图片到本地、读取相册这样的权限

## 任务要求
1. 开发的时候可以采取逐步开发的策略，慢慢补充需求，慢慢新增数据字段等
2. 避免单个文件代码过长，**必须要遵循MVP模式**
3. 按照指定的页面结构、参考给定的截图作为UI设计指导
4. 严格按照已经定义好的数据结构`app\src\main\java\com\example\GaoDe\model`和已有的数据`app\src\main\assets\data`
5. 按照用户要求进行开发，除非用户指定，否则不要引入新的内容。
    - 你只需要参考我给你的截图，**不要脑补**截图中各个按钮点击后会达到的效果。
    - ***截图里面的信息（例如人的名字、人的头像）不必参考***，因为我们自己预设了已有的数据`app\src\main\assets\data`
6. UI中，各个图标若找不到合适的，可以用emjoy表情代替。但优先考虑`androidx.compose.material.icons.Icons, androidx.compose.material.icons.filled.AccountCircle`等
7. 严禁执行删除文件等危险操作。
8. 每当你修改完代码，记得更新`README.md`文件，并且确定build正常了再交付给我。禁止修改`需求.md`.
9. 如果你需要图片支持，请给我反馈，告诉我需要什么图片。如果你使用了我给你的图片，记得把图片名改为一个可读的名字，便于后期维护。

## 页面树
```json
{
  "MainActivity": [
    "HomePage",//NOW TO DO!!
    "MessagePage",
    "MyPage"
  ],
  "HomePage": [
    "ShowMap",
    "SearchPlace",
    "ShowPlaceDetails",
    "PlanRoute",
    "StartNavigation"
  ],
  "MessagePage": [
    "OpenChat",
    "ShowNotifications"
  ],
  "MyPage": [
    "ManageFavorites",
    "EmergencyCall",
    "ChangeCarIcon",
    "ChangeNavVoice"
  ]
}


## 可参考的截图
UIReference/HomePage.png

## 你当前的任务
修改我的HomePage界面
[当前问题分析]
我当前的界面存在以下待解决的问题：
UI冗余: 底部拖拽面板（BottomSheet）的顶部有两条平行的灰色横线，这在视觉上是多余的。
交互缺陷: 当我将BottomSheet拖拽收起到最底部时，整个面板（包括搜索栏）都消失了，用户无法进行搜索。
性能感知差: “地图加载中...”的提示停留时间过长，缺乏明确的状态反馈，给用户带来了“慢”的感觉。
[核心重构指令]
请严格按照以下三点指令，对我的UI代码进行重构：
1. UI清理：移除多余的拖拽指示器
指令: 在BottomSheet的sheetContent中，只保留最顶部的一条灰色横线作为拖拽手柄。
实现要点: 检查布局代码，定位并删除第二条多余的Divider或Box组件。确保最终只有一个视觉上的拖拽指示器。
2. BottomSheet行为修正：在收起状态下保留搜索栏
指令: 调整BottomSheetScaffold的配置，使其在折叠（收起）状态下，依然能完整显示顶部的搜索栏。
实现要点:
找到BottomSheetScaffold的sheetPeekHeight参数。
将其值设置为一个固定的Dp值，该值应等于或略大于搜索栏的高度加上其垂直方向的padding。一个推荐的起始值是 80.dp，请根据你的实际布局进行微调。
3. 地图加载优化：引入UI状态管理
指令: 这不是真正地“加速”地图加载，而是通过精细化的状态管理来优化用户的等待体验。请重构地图的加载逻辑。
实现要点:
a. 定义UI状态: 创建一个sealed class MapUiState，至少包含三种状态：object Loading, object Success, data class Error(val message: String)。
b. 创建ViewModel: 创建一个HomePageViewModel。在ViewModel中，持有一个StateFlow来管理MapUiState，初始值为MapUiState.Loading。
private val _uiState = MutableStateFlow<MapUiState>(MapUiState.Loading)
val uiState: StateFlow<MapUiState> = _uiState
c. 模拟加载: 在ViewModel的init块中，启动一个协程。在这个协程里：
确保初始状态是Loading。
使用 delay(1500L) 来模拟一个更快的网络请求。
加载成功后，将状态更新为 _uiState.value = MapUiState.Success。
d. 在UI中响应状态: 在你的HomePage Composable中，使用viewModel.uiState.collectAsStateWithLifecycle()来监听状态变化。然后使用when表达式根据当前状态来决定显示哪个UI：
当状态是Loading时，显示“地图加载中...”的提示框。
当状态是Success时，隐藏提示框，并显示真实的地图组件占位符。
当状态是Error时，显示错误信息。